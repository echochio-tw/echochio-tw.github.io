I"´<p>ÂèÉËÄÉ https://github.com/eppemela/qnap-x51-cacti-template</p>

<p>ÁµêÊûú : 
<img src="/images/posts/qnap/p1.png" /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

<span class="c">#########################################################################</span>
<span class="c"># cacti script for QNAP NAS</span>
<span class="c"># Partly based on work from: http://pnpk.net</span>
<span class="c">#</span>
<span class="c"># PURPOSE: Obtain temperature information in C (if you want F, modify the</span>
<span class="c"># 'cut' and 'awk' fields</span>
<span class="c"># Usage: &lt;path_cacti&gt;/scripts/qnap-temperature.sh &lt;hostname&gt; &lt;snmp_community&gt;</span>
<span class="c">#</span>
<span class="c">#########################################################################</span>


<span class="nv">cputemp</span><span class="o">=</span><span class="sb">`</span>/Apps/opt/bin/snmpget <span class="nt">-v</span> 3 <span class="nt">-a</span> MD5 <span class="nt">-A</span> cactipoller <span class="nt">-l</span> authNoPriv <span class="nt">-u</span> cactipoller localhost .1.3.6.1.4.1.24681.1.2.5.0 |cut <span class="nt">-d</span><span class="se">\"</span> <span class="nt">-f2</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s1">' '</span> <span class="nt">-f1</span> |awk <span class="s1">'{ printf($1) }'</span><span class="sb">`</span>
<span class="nv">systemp</span><span class="o">=</span><span class="sb">`</span>/Apps/opt/bin/snmpget <span class="nt">-v</span> 3 <span class="nt">-a</span> MD5 <span class="nt">-A</span> cactipoller <span class="nt">-l</span> authNoPriv <span class="nt">-u</span> cactipoller localhost .1.3.6.1.4.1.24681.1.2.6.0 |cut <span class="nt">-d</span><span class="se">\"</span> <span class="nt">-f2</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s1">' '</span> <span class="nt">-f1</span> |awk <span class="s1">'{ printf($1) }'</span><span class="sb">`</span>

<span class="c"># Expand here if needed</span>
<span class="nv">hd1temp</span><span class="o">=</span><span class="sb">`</span>/Apps/opt/bin/snmpget <span class="nt">-v</span> 3 <span class="nt">-a</span> MD5 <span class="nt">-A</span> cactipoller <span class="nt">-l</span> authNoPriv <span class="nt">-u</span> cactipoller localhost .1.3.6.1.4.1.24681.1.2.11.1.3.1 |cut <span class="nt">-d</span><span class="se">\"</span> <span class="nt">-f2</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s1">' '</span> <span class="nt">-f1</span> |awk <span class="s1">'{ printf($1) }'</span><span class="sb">`</span>
<span class="c">#hd2temp=`/Apps/opt/bin/snmpget -v3 -t 3 -u cactipoller localhost .1.3.6.1.4.1.24681.1.2.11.1.3.2 |cut -d\" -f2 | cut -d' ' -f1 |awk '{ printf($1) }'`</span>
<span class="c">#hd3temp=`/Apps/opt/bin/snmpget -v3 -t 3 -u cactipoller localhost .1.3.6.1.4.1.24681.1.2.11.1.3.3 |cut -d\" -f2 | cut -d' ' -f1 |awk '{ printf($1) }'`</span>
<span class="c">#hd4temp=`/Apps/opt/bin/snmpget -v3 -t 3 -u cactipoller localhost .1.3.6.1.4.1.24681.1.2.11.1.3.4 |cut -d\" -f2 | cut -d' ' -f1 |awk '{ printf($1) }'`</span>

<span class="nb">printf</span> <span class="s1">' cputemp:'</span><span class="nv">$cputemp</span>
<span class="nb">printf</span> <span class="s1">' hd1temp:'</span><span class="nv">$hd1temp</span>
<span class="c">#printf ' hd2temp:'$hd2temp</span>
<span class="c">#printf ' hd3temp:'$hd3temp</span>
<span class="c">#printf ' hd4temp:'$hd4temp</span>
<span class="nb">printf</span> <span class="s1">' systemp:'</span><span class="nv">$systemp</span>

<span class="nb">exit </span>0
</code></pre></div></div>

<p><img src="/images/posts/qnap/p2.png" /></p>
:ET