I"Ò<ol>
  <li>
    <p>å®‰è£ linux Centos 6.8 x32 â€¦..(æˆ‘è£ x64 è¨­ä¸èµ·ä¾† â€¦æ”¹å¤©å†ç ”ç©¶ â€¦ CentOS 7 æ”¹å¤©å†è©¦)</p>
  </li>
  <li>
    <p>å®‰è£ compile å·¥å…· gcc , g++ ç­‰ç­‰é–‹ç™¼å·¥å…·</p>
  </li>
  <li>
    <p>è¶¨å‹¢ä¸‹è¼‰å€ : http://downloadcenter.trendmicro.com/</p>
  </li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>æƒæå¼•æ“(X32çš„) engv_linux_xxx-xxxx.zip 
è§£é–‹ç‚º libvsapi.so 
æ”¾æ–¼ /etc/iscan ä¸‹é¢

ç—…æ¯’æª” Enterprise Pattern - Unix 
ptnXXX.tar æª” è§£é–‹ç‚º lpt$vpn.XXX
æ”¾æ–¼ /etc/iscan ä¸‹é¢
</code></pre></div></div>

<ol>
  <li>ä¸‹è¼‰ havp â€¦æˆ‘æ˜¯ç”¨ havp-0.92a â€¦.è§£å£“ç¸®åˆ‡æ›åˆ° havp-0.92a</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ./configure --disable-clamav

make
make install

groupadd havp
useradd -g havp havp
</code></pre></div></div>

<p>ä¿®æ”¹ /usr/local/etc/havp/havp.config</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### ç†è«–ä¸Šè¶Šå¤šçš„åŸ·è¡Œç·’æ•ˆèƒ½æ•ˆèƒ½è¶Šå¥½, ä½†ä»éœ€è¦–ä¼ºæœå™¨è³‡æºè€Œå®š  çœ‹éœ€æ±‚
# Default:
# SERVERNUMBER 8
# MAXSERVERS 100

### åªè¨˜éŒ„ error log. è¼ƒå°‘çš„ Log è¨˜éŒ„å¯æ¸›è¼•ä¼ºæœå™¨è² æ“”  çœ‹éœ€æ±‚
LOGLEVEL 0

### ä¸å°åœ–ç‰‡æª”æƒæ¯’, å¯æ¸›è¼• CPU è² æ“” çœ‹éœ€æ±‚
SCANIMAGES false

#####
##### Trend Micro Library Scanner (Trophie)
#####

ENABLETROPHIE true
</code></pre></div></div>

<p>ä¿®æ”¹ rc.local</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>
<span class="c">#</span>
<span class="c"># This script will be executed *after* all the other init scripts.</span>
<span class="c"># You can put your own initialization stuff in here if you don't</span>
<span class="c"># want to do the full Sys V style init stuff.</span>
<span class="c"># size= 512m RAM disk ...é€™æ¨£æƒææ‰æœƒå¿« </span>

mount <span class="nt">-t</span> tmpfs <span class="nt">-o</span> <span class="nv">size</span><span class="o">=</span>512m tmpfs /mnt/ramdisk 
<span class="nb">ln</span> <span class="nt">-s</span> /mnt/ramdisk /var/tmp/havp
mount <span class="nt">-o</span> mand /mnt/ramdisk
<span class="nb">chown </span>havp /var/tmp/havp /var/log/havp /var/run/havp
<span class="nb">chmod </span>700 /var/tmp/havp /var/log/havp /var/run/havp

/etc/init.d/havp start

<span class="nb">touch</span> /var/lock/subsys/local

</code></pre></div></div>

<p>åŸ·è¡Œ  rc.local</p>

<p>çœ‹æœå‹™æ˜¯å¦æœ‰</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/sbin/havp -c /usr/local/etc/havp/havp.config

netstat -na |grep 8080

tcp        0      0 0.0.0.0:8080                0.0.0.0:*                   LISTEN
</code></pre></div></div>

<p>linux é˜²ç«ç‰†è¦é–‹ 8080 æœå‹™</p>

<p>é€™æ¨£å°‡ web å°å‘é€™å° linux port 8080 å°±å¯</p>

<p>å¯è§€çœ‹ log</p>

<p>æœ‰ç—…æ¯’æ™‚æœƒåœ¨ /var/log/havp/error.log</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tail -f /var/log/havp/access.log
12/10/2016 08:33:39 === Starting HAVP Version: 0.92
12/10/2016 08:33:39 Running as user: havp, group: havp
12/10/2016 08:33:39 --- Initializing Trend Micro Library Scanner
12/10/2016 08:33:40 Trophie: Loaded 718104 signatures (pattern 12.651.00 / engine 9.850-1008)
12/10/2016 08:33:40 Trend Micro Library Scanner passed EICAR virus test (Eicar_test_file)
12/10/2016 08:33:40 --- All scanners initialized
12/10/2016 08:33:40 Process ID: 1749
</code></pre></div></div>
:ET