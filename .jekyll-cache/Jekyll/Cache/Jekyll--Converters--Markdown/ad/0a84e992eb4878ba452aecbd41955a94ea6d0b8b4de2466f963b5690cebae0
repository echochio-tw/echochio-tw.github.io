I"ã#<p>ç™¾åº¦é›²ç›¤çš„ç©ºé–“æ¥µå¤§ â€¦ 2T</p>

<p>ç”¨ä¾†ç•¶å‚™ä»½æœ€å¥½äº† â€¦.</p>

<p>ä¿å­˜é‡è¦è³‡æ–™è«‹ç”¨ DES3 åŠ å¯† â€¦..
ä¸å¯èƒ½çŒœçš„åˆ°åŠ å¯†çš„å¯†ç¢¼å•¦ â€¦â€¦é™¤éå¤ªç°¡å–® 
è«‹åƒè€ƒ</p>

<p>https://www.echochio.nctu.me/2017/05/Mega_backup/</p>

<p>ç™¾åº¦é›²ç›¤æœ‰äº›é™åˆ¶ â€¦å–®ä¸€æª”æ¡ˆä¸èƒ½è¶…é 2G</p>

<p>â€¦è¶…éå°±åˆ‡å‰²å‚™ä»½ â€¦.(èªª ç™¾åº¦é›²PCS æœƒè‡ªå‹•åˆ‡æ²’è©¦é )</p>

<p>ç”¨ pip install bypy å®‰è£éç¨‹å¦‚ä¸‹ :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># pip install requests
Requirement already satisfied: requests in /usr/lib/python2.7/site-packages
# pip install bypy
Collecting bypy
  Downloading bypy-1.5.7-py2.py3-none-any.whl (236kB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 245kB 676kB/s
Collecting multiprocess&gt;=0.70.0 (from bypy)
  Downloading multiprocess-0.70.5.zip (1.5MB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.5MB 795kB/s
Collecting requests-toolbelt&gt;=0.8.0 (from bypy)
  Downloading requests_toolbelt-0.8.0-py2.py3-none-any.whl (54kB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 61kB 3.1MB/s
Requirement already satisfied: requests&gt;=2.10.0 in /usr/lib/python2.7/site-packages (from bypy)
Collecting dill&gt;=0.2.6 (from multiprocess&gt;=0.70.0-&gt;bypy)
  Downloading dill-0.2.7.tar.gz (64kB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 71kB 4.3MB/s
Installing collected packages: dill, multiprocess, requests-toolbelt, bypy
  Running setup.py install for dill ... done
  Running setup.py install for multiprocess ... done
Successfully installed bypy-1.5.7 dill-0.2.7 multiprocess-0.70.5 requests-toolbelt-0.8.0

</code></pre></div></div>

<p><img src="/images/posts/baidu_backup/p1.png" /></p>

<p>å®‰è£å¥½äº†å°± bypy list æœƒé€£ ç™¾åº¦å«ä½ ç”¨ç¶²é èªè­‰å– token</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># bypy list
Please visit:
https://openapi.baidu.com/oauth/2.0/authorize?scope=basic+netdisk&amp;redirect_uri=oob&amp;response_type=code&amp;client_id=q8WE4EpC11111gMKNBn
And authorize this app
Paste the Authorization Code here within 10 minutes.
Press [Enter] when you are done
e3f641d24c29111111eefbdb6
Authorizing, please be patient, it may take upto None seconds...
Authorizing/refreshing with the OpenShift server ...
Successfully authorized
/apps/bypy ($t $f $s $m $d):
</code></pre></div></div>
<p><img src="/images/posts/baidu_backup/p2.png" /></p>

<p>æ‰“å…¥ bypy syncup ä¸Šå‚³ â€¦.å»ç¶²é å°±çœ‹åˆ°ä¸Šå‚³çš„æª”æ¡ˆäº†</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># bypy syncup
# ls
client_secret.json  GoUpload.json  main.go  PythonUpload.json  sql.go  up.py
</code></pre></div></div>
<p><img src="/images/posts/baidu_backup/p3.png" /></p>

<p>å¯æŸ¥çœ‹æ¯”è¼ƒ</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># rm -rf *
# bypy -v compare
Loading Hash Cache File '/root/.bypy/bypy.hashcache.json'...
Hash Cache File '/root/.bypy/bypy.hashcache.json' not found, no caching
Gathering local directory ...
Done
Gathering remote directory ...
Done
Comparing ...
Done
==== Same files ===
==== Different files ===
==== Local only ====
==== Remote only ====
F - GoUpload.json
F - main.go
F - client_secret.json
F - up.py
F - PythonUpload.json
F - sql.go

Statistics:
--------------------------------
Same: 0
Different: 0
Local only: 0
Remote only: 6
</code></pre></div></div>

<p>ä¿®æ”¹å–®ä¸€æª”æ¡ˆå¾Œå†ä¸Šå‚³ä¸€æ¬¡ , æˆ– åˆªé™¤ éƒ½ OK
ä¸çŸ¥ç‚ºå•¥æª”æ¡ˆç„¡æ³•ä¸‹è¼‰syncdown ,,,,, ä½†ç”¨ç¶²é ä¸‹è¼‰ OK â€¦..
æ²’å·® ,,,,å¯åˆªé™¤æˆ–è¦†è“‹å°± OK åªæ˜¯å‚™ä»½è³‡æ–™ â€¦
å¦‚çœŸè¦é‚£è³‡æ–™å°±å»ç¶²é , æˆ–ç™¾åº¦æä¾›çš„ç¨‹å¼ æ‹‰ä¸‹ä¾† â€¦
(ç”¨ -v å¯çœ‹åˆ°æ¯”è¼ƒè©³ç´°è³‡è¨Š)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># echo test &gt; up.py
# bypy -v syncup
Loading Hash Cache File '/root/.bypy/bypy.hashcache.json'...
Hash Cache File '/root/.bypy/bypy.hashcache.json' not found, no caching
Gathering local directory ...
Done
Gathering remote directory ...
Done
Comparing ...
Done
Deletion request '4346517072182273125' OK
Usage 'list' command to confirm
'up.py' ==&gt; '/apps/bypy/up.py' OK.
# bypy -v rm up.py
Loading Hash Cache File '/root/.bypy/bypy.hashcache.json'...
Hash Cache File loaded.
Deletion request '4346663918813325060' OK
Usage 'list' command to confirm
</code></pre></div></div>

<p>é€™è£¡æ˜¯åƒæ•¸çš„ç”¨æ³•</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> optional arguments:
  -h, --help            show this help message and exit
  --TESTRUN             Perform python doctest [default: False]
  --PROFILE             Profile the code [default: False]
  -V, --version         show program's version number and exit
  -d, --debug           enable debugging &amp; logging [default: 0]
  -v, --verbose         set verbosity level [default: 0]
  -r RETRY, --retry RETRY
                        number of retry attempts on network error [default: 5
                        times]
  -q QUIT, --quit-when-fail QUIT
                        quit when maximum number of retry failed [default:
                        False]
  -t TIMEOUT, --timeout TIMEOUT
                        network timeout in seconds [default: 60]
  -s SLICE, --slice SLICE
                        size of file upload slice (can use '1024', '2k',
                        '3MB', etc) [default: 20 MB]
  --chunk CHUNK         size of file download chunk (can use '1024', '2k',
                        '3MB', etc) [default: 20 MB]
  -e, --verify          Verify upload / download [default : False]
  -f, --force-hash      force file MD5 / CRC32 calculation instead of using
                        cached values [default: False]
  -l LISTFILE, --list-file LISTFILE
                        input list file (used by some of the commands only
                        [default: None]
  --resume-download RESUMEDL
                        resume instead of restarting when downloading if local
                        file already exists [default: True]
  --include-regex INCREGEX
                        regular expression of files to include. if not
                        specified (default), everything is included. for
                        download, the regex applies to the remote files; for
                        upload, the regex applies to the local files. to
                        exclude files, think about your regex, some tips here:
                        https://stackoverflow.com/questions/406230/regular-
                        expression-to-match-string-not-containing-a-word
                        [default: ]
  --on-dup ONDUP        what to do when the same file / folder exists in the
                        destination: 'overwrite', 'skip', 'prompt' [default:
                        overwrite]
  --no-symlink          DON'T follow symbol links when uploading / syncing up
                        [default: True]
  --disable-ssl-check   DON'T verify host SSL cerificate [default: True]
  -c, --clean           1: clean settings (remove the token file) 2: clean
                        settings and hash cache [default: 0]

Commands:
help command - provide some information for the command
cleancache - remove invalid entries from hash cache file
combine &lt;remotefile&gt; [md5s] [localfile] - try to create a file at PCS by combining slices, having MD5s specified
compare [remotedir] [localdir] - compare the remote direcotry with the local directory
copy/cp &lt;from&gt; &lt;to&gt; - copy a file / dir remotely at Baidu Yun
delete/remove/rm &lt;remotepath&gt; - delete a file / dir remotely at Baidu Yun
downdir &lt;remotedir&gt; [localdir] - download a remote directory (recursively)
downfile &lt;remotefile&gt; [localpath] - download a remote file.
dumpcache - display file hash cache
list/ls [remotepath] [format] [sort] [order] - list the 'remotepath' directory at Baidu PCS
listrecycle [start] [limit] - list the recycle contents
meta &lt;remotepath&gt; [format] - get information of the given path (dir / file) at Baidu Yun.
mkdir &lt;remotedir&gt; - create a directory at Baidu Yun
move/mv/rename/ren &lt;from&gt; &lt;to&gt; - move a file / dir remotely at Baidu Yun
quota/info - displays the quota information
refreshtoken - refresh the access token
restore &lt;remotepath&gt; - restore a file from the recycle bin
search &lt;keyword&gt; [remotepath] [recursive] - search for a file using keyword at Baidu Yun
stream &lt;remotefile&gt; &lt;localpipe&gt; [format] [chunk] - stream a video / audio file converted to M3U format at cloud side, to a pipe.
syncdown [remotedir] [localdir] [deletelocal] - sync down from the remote direcotry to the local directory
syncup [localdir] [remotedir] [deleteremote] - sync up from the local direcotry to the remote directory
upload [localpath] [remotepath] [ondup] - upload a file or directory (recursively)
</code></pre></div></div>
:ET